# github-simulation â€” Capability Interface
# What it can do, how to invoke it

meta:
  id: github-simulation
  version: 2
  inherits:
    - github                 # Core GitHub ops (moollm) â€” Linus mellowed
    - adventure              # Room-based exploration (moollm)
    - character              # Entity foundation (moollm)
    - simulation             # Central hub (moollm)
    - procedural-rhetoric    # Rules embody arguments (Bogost)
    - representation-ethics  # Ethics of simulating people
    - mcluhan               # Medium is the message â€” GitHub IS the content
  
tagline: "GitHub as MMORPG â€” Issues are scenes, branches are factions"

capabilities:
  orchestrate:
    - Coordinate multi-character interactions via SIMULATION.yml
    - Track runtime state (unsafe_calls_fixed, character_activity)
    - Manage branch-as-faction parallel realities
    
  generate:
    - Create in-character issues with gh CLI
    - Generate commit messages in character voice
    - Forge comments as specific personas
    
  sync:
    - Multiverse sync of core files across branches
    - PR Guardian gatekeeping for faction warfare
    - CODEOWNERS enforcement for character protection

activation_triggers:
  - "run a github simulation"
  - "orchestrate characters on github"
  - "create an issue as [character]"
  - "forge a commit as [character]"
  - "explain SIMULATION.yml"

files:
  core:
    - SIMULATION.yml      # Runtime state and orchestration
    - characters/         # The playable cast
    - rooms/              # Spatial layout
    
  workflows:
    - .github/workflows/multiverse-sync.yml
    - .github/workflows/pr-guardian.yml
    - .github/CODEOWNERS

auth_modes:
  # Who is actually making the GitHub API calls?
  
  default:
    mode: "Single User Puppeteer"
    description: |
      Use your current gh login. All actions come from YOUR account.
      The ðŸŽ­ prefix and signatures indicate roleplay.
      This is the default â€” no special auth setup required.
    command: "gh auth status  # shows current login"
    
  multi_account:
    mode: "Dedicated Sock Puppet Accounts"
    description: |
      Create actual GitHub accounts for characters.
      Switch auth context to post as that character.
      More immersive but requires managing multiple accounts.
    setup: |
      # Create accounts: OpenBFD-bot, FearlessCrab-bot, etc.
      # Store tokens securely
      # Switch context per character:
      gh auth login --with-token < ~/.tokens/openbfd.token
      # ... do character actions ...
      gh auth login --with-token < ~/.tokens/default.token
    note: "Respect GitHub ToS on automated accounts"
    
  real_user:
    mode: "Authorized Real User"
    description: |
      With proper auth (keys, tokens, OAuth), you could
      theoretically act as any user you're authorized for.
      For collab projects where multiple humans participate.
    use_case: "Team members playing their own characters"

commands:
  create_issue: |
    gh issue create \
      --title "ðŸŽ­[emoji] [Title]" \
      --label "ai-generated,[faction]" \
      --body "$(cat issue-body.md)"
      
  add_comment: |
    gh issue comment [number] --body "$(cat comment.md)"
    
  forge_commit: |
    git commit -m "ðŸŽ­[emoji] [type]: [message in character voice]"

the_joke: |
  Characters generate endless discussion.
  872 unsafe function calls sit unfixed.
  This is the joke. This is also real open source.

k-lines:
  # Activation tags for semantic retrieval
  - github-mmorpg
  - branches-as-factions
  - multiverse-sync
  - force-sync-core-files    # Learned: cherry-pick fails on modify/delete
  - explicit-file-paths      # Learned: list files, don't glob
  - character-name-collision # Learned: check real users before naming
  - moollm-mount-required    # Integration pattern

operational_knowledge:
  # Cached lessons â€” see SKILL.md for details
  sync_strategy: "Force-sync core files. Cherry-pick fails on modify/delete conflicts."
  file_paths: "Explicit > glob. Fixed microworld = fixed file list."
  name_check: "gh api users/{name} before creating characters."
  the_joke: "872 unfixed calls while discussing rewrites."

see_also:
  - github-user       # Characters as GitHub actors
  - code-archaeology  # How OpenBFD actually fixes code
